{"ast":null,"code":"var _jsxFileName = \"/home/coder/Documents/Info News/info-news-app/src/pages/Admin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport '../styles/admin.css';\nimport axios from 'axios';\nimport Select from 'react-select';\nimport DeletePost from '../components/deletePost';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminLog = styled.div`\n    display: flex;\n    background-color: white;\n    margin-top: 5rem;\n    align-self: center;\n    align-content: center;\n    align-items: center;\n    width: 20rem;\n    border-radius: 2rem;\n    height:30rem;\n    padding: 3rem;\n    display: inline-block;\n    border-style: solid;\n    border-color: #00a2ff;\n    margin-left: 42.5rem;\n    \n`;\n_c = AdminLog;\nconst ColoredLine = styled.hr`\n            color:#00a2ff;\n            background-color: #00a2ff;\n            height: 1px;\n            display: flex;\n            width: 16rem;\n            align-self: center;\n            margin-top: 0.5rem;\n            margin-right: 3rem;\n\n`;\n_c2 = ColoredLine;\nconst ColoredLine1 = styled.hr`\n            color:#00a2ff;\n            background-color: #00a2ff;\n            height: 1px;\n            display: flex;\n            width: 100rem;\n            align-self: center;\n            margin-top: 0.5rem;\n            margin-right: 3rem;\n\n`;\n_c3 = ColoredLine1;\nconst AdminPanel = styled.div`\n    \n   \n    background-color: white;\n    margin-top: 5rem;\n    align-self: center;\n    align-content: center;\n    align-items: center;\n    width: 105rem;\n    border-radius: 1rem;\n    height: auto;\n    padding: 2rem;\n    display: inline-block;\n    border-style: solid;\n    border-color: #00a2ff;\n    margin-left: 2rem;\n    \n`;\n_c4 = AdminPanel;\nconst DeleteTab = styled.div`\n     width: 70rem;\n     align-items: center;\n     display: inline-block;\n     overflow: scroll;\n     height: 35rem;\n     display: inline;\n     margin-left: 15rem;\n`;\n_c5 = DeleteTab;\n\nconst Admin = () => {\n  _s();\n\n  //admin login----------------------------------------\n  const [username, setUsername] = useState([]);\n  const [password, setPassword] = useState([]);\n  const [message, setMessage] = useState(['']);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const handleUsernameChange = event => {\n    setUsername(event.target.value);\n  };\n\n  const handlePasswordChange = event => {\n    setPassword(event.target.value);\n  };\n\n  const handleSubmit = event => {\n    var payload = {\n      username: username,\n      password: password\n    };\n    axios.post(`http://localhost:5000/api/auth/admin`, payload).then(res => {\n      console.log(res.status);\n      setMessage(\"Login Verified\");\n      setIsAdmin(true);\n    }).catch(err => {\n      setMessage(\"Unauthorised login\");\n      console.log(err);\n    });\n  }; //New post---------------------------------------------\n\n\n  const options = [{\n    value: 'Tech',\n    label: 'Tech'\n  }, {\n    value: 'Education',\n    label: 'Education'\n  }, {\n    value: 'Economy',\n    label: 'Economy'\n  }, {\n    value: 'Sports',\n    label: 'Sports'\n  }, {\n    value: 'Other',\n    label: 'Other'\n  }];\n  const [title, setTitle] = useState([]);\n  const [content, setContent] = useState([]);\n  const [selectedOption, setSelectedOption] = useState([]);\n  const [file, setFile] = useState([]);\n\n  const handleTitleChange = event => {\n    setTitle(event.target.value);\n  };\n\n  const handleContentChange = event => {\n    setContent(event.target.value);\n  };\n\n  const handleDropDownChange = event => {\n    setSelectedOption(event.value);\n    console.log(event.value);\n  };\n\n  const handlefileSelected = event => {\n    setFile(event.target.files[0]);\n    console.log(event.target.files[0]);\n  };\n\n  const handleNewSubmit = () => {\n    console.log(title, content); //Image upload-----------------------------------------------------\n\n    const fd = new FormData();\n    const filename = Date.now() + file.name;\n    fd.append('name', filename);\n    fd.append('file', file);\n    console.log(file.name);\n\n    if (file) {\n      try {\n        axios.post(`http://localhost:5000/api/upload`, fd).then(res => {\n          console.log(res.data);\n          setFile('');\n        }).catch(err => {\n          console.log(err);\n        });\n      } catch (err) {}\n    }\n\n    var payload = {\n      title: title,\n      description: content,\n      category: selectedOption,\n      username: username,\n      photo: filename\n    };\n    axios.post(`http://localhost:5000/api/posts/newpost`, payload).then(res => {\n      console.log(res.data);\n      alert(\"Posted\");\n      setTitle('');\n      setContent('');\n      setSelectedOption('');\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  if (isAdmin == false) {\n    return /*#__PURE__*/_jsxDEV(AdminLog, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login As Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(ColoredLine, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        value: username,\n        onChange: handleUsernameChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: handlePasswordChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"loginBtn\",\n        type: \"submit\",\n        onClick: handleSubmit,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(AdminPanel, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Admin Panel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ColoredLine1, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"New Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"newPost\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"title\",\n          type: \"text\",\n          placeholder: \"Title\",\n          value: title,\n          onChange: handleTitleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Upload Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"imagePicker\",\n          type: \"file\",\n          accept: \".jpg,.jpeg,.png\",\n          multiple: \"false\",\n          onChange: handlefileSelected\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"content\",\n          type: \"text\",\n          placeholder: \"Content\",\n          value: content,\n          onChange: handleContentChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          id: \"selectCat\",\n          children: \"Select Category \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          id: \"dropDown\",\n          value: selectedOption,\n          onChange: handleDropDownChange,\n          options: options,\n          placeholder: selectedOption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"newBtn\",\n          type: \"submit\",\n          onClick: handleNewSubmit,\n          children: \"POST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DeleteTab, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Click To Delete Below Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 18\n        }, this), /*#__PURE__*/_jsxDEV(DeletePost, {\n          user: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(Admin, \"7Qx+gp7rKH7HyXzpwQXPK4y597c=\");\n\n_c6 = Admin;\nexport default Admin;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"AdminLog\");\n$RefreshReg$(_c2, \"ColoredLine\");\n$RefreshReg$(_c3, \"ColoredLine1\");\n$RefreshReg$(_c4, \"AdminPanel\");\n$RefreshReg$(_c5, \"DeleteTab\");\n$RefreshReg$(_c6, \"Admin\");","map":{"version":3,"sources":["/home/coder/Documents/Info News/info-news-app/src/pages/Admin.jsx"],"names":["React","useState","styled","axios","Select","DeletePost","AdminLog","div","ColoredLine","hr","ColoredLine1","AdminPanel","DeleteTab","Admin","username","setUsername","password","setPassword","message","setMessage","isAdmin","setIsAdmin","handleUsernameChange","event","target","value","handlePasswordChange","handleSubmit","payload","post","then","res","console","log","status","catch","err","options","label","title","setTitle","content","setContent","selectedOption","setSelectedOption","file","setFile","handleTitleChange","handleContentChange","handleDropDownChange","handlefileSelected","files","handleNewSubmit","fd","FormData","filename","Date","now","name","append","data","description","category","photo","alert"],"mappings":"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","sourcesContent":["import React,{useState}  from 'react'\nimport styled from 'styled-components'\nimport '../styles/admin.css'\nimport axios from 'axios'\nimport Select from 'react-select'\nimport DeletePost from '../components/deletePost'\n\nconst AdminLog = styled.div`\n    display: flex;\n    background-color: white;\n    margin-top: 5rem;\n    align-self: center;\n    align-content: center;\n    align-items: center;\n    width: 20rem;\n    border-radius: 2rem;\n    height:30rem;\n    padding: 3rem;\n    display: inline-block;\n    border-style: solid;\n    border-color: #00a2ff;\n    margin-left: 42.5rem;\n    \n`\nconst ColoredLine = styled.hr`\n            color:#00a2ff;\n            background-color: #00a2ff;\n            height: 1px;\n            display: flex;\n            width: 16rem;\n            align-self: center;\n            margin-top: 0.5rem;\n            margin-right: 3rem;\n\n`\nconst ColoredLine1 = styled.hr`\n            color:#00a2ff;\n            background-color: #00a2ff;\n            height: 1px;\n            display: flex;\n            width: 100rem;\n            align-self: center;\n            margin-top: 0.5rem;\n            margin-right: 3rem;\n\n`\nconst AdminPanel=styled.div`\n    \n   \n    background-color: white;\n    margin-top: 5rem;\n    align-self: center;\n    align-content: center;\n    align-items: center;\n    width: 105rem;\n    border-radius: 1rem;\n    height: auto;\n    padding: 2rem;\n    display: inline-block;\n    border-style: solid;\n    border-color: #00a2ff;\n    margin-left: 2rem;\n    \n`\nconst DeleteTab=styled.div`\n     width: 70rem;\n     align-items: center;\n     display: inline-block;\n     overflow: scroll;\n     height: 35rem;\n     display: inline;\n     margin-left: 15rem;\n`\n\nconst Admin= ()=>{\n    //admin login----------------------------------------\n\n    const [username,setUsername] =useState([])\n    const [password,setPassword] =useState([])\n    const [message,setMessage] =useState([''])\n    const [isAdmin,setIsAdmin] =useState(false)\n    \n  \n\n    const handleUsernameChange=(event)=>{\n        \n        setUsername(event.target.value)\n    }\n    const handlePasswordChange=(event)=>{\n        setPassword(event.target.value)\n    }\n    const handleSubmit=(event)=>{\n       \n        var payload = { \n            username: username,\n            password: password\n        }\n        axios.post(`http://localhost:5000/api/auth/admin`,payload)\n        .then(res => {\n         console.log(res.status);\n         setMessage(\"Login Verified\")\n         setIsAdmin(true)\n        \n\n          \n       }).catch((err)=> {\n        \n           setMessage(\"Unauthorised login\")\n           console.log(err)\n        })\n   }\n        \n   //New post---------------------------------------------\n   const options = [\n       { value: 'Tech', label: 'Tech' },\n       { value: 'Education', label: 'Education' },\n       { value: 'Economy', label: 'Economy' },\n       { value: 'Sports', label: 'Sports' },\n       { value: 'Other', label: 'Other' },\n    ]\n     \n   \n\n   const [title,setTitle] =useState([])\n   const [content,setContent] =useState([])\n   const [selectedOption,setSelectedOption] =useState([])\n   const [file,setFile] =useState([])\n\n   const handleTitleChange=(event)=>{\n        setTitle(event.target.value)\n   }\n   const handleContentChange=(event)=>{\n    setContent(event.target.value)\n   }\n   const handleDropDownChange = (event) =>{\n    setSelectedOption(event.value)\n    console.log(event.value);\n   }\n\n   const handlefileSelected =(event)=>{\n    setFile(event.target.files[0])\n    console.log(event.target.files[0]);\n   }\n\n   const handleNewSubmit=()=>{\n        console.log(title,content);\n        \n        \n\n       //Image upload-----------------------------------------------------\n       const fd = new FormData()\n       const filename = Date.now()+file.name\n       fd.append('name',filename)\n       fd.append('file',file)\n\n       console.log(file.name);\n       \n       if (file){\n           try{\n            axios.post(`http://localhost:5000/api/upload`,fd)\n            .then(res => {\n             console.log(res.data);\n\n                setFile('')\n\n           }).catch((err)=> {console.log(err)})\n           \n           }catch(err){\n\n           }\n        }\n            var payload = { \n                title: title,\n                description: content,\n                category: selectedOption,\n                username:username,\n                photo:filename\n            }\n            axios.post(`http://localhost:5000/api/posts/newpost`,payload)\n            .then(res => {\n                console.log(res.data);\n                alert(\"Posted\")\n                setTitle('')\n                setContent('')\n                setSelectedOption('')\n\n            }).catch((err)=> {console.log(err)})\n            \n   }\n    if (isAdmin==false){\n        return(\n            <AdminLog> \n                 <h1>Login As Admin</h1>\n                 <ColoredLine/>\n                 \n                 <input \n                       type=\"text\" \n                       placeholder=\"Name\"\n                       value={username} \n                       onChange={handleUsernameChange}/>\n                <input \n                       type=\"text\" \n                       placeholder=\"Password\"\n                       value={password} \n                       onChange={handlePasswordChange}/>\n    \n                <button id=\"loginBtn\" type=\"submit\" onClick={handleSubmit}>Login</button>\n                <p>{message}</p>\n            </AdminLog>\n          \n        )\n    }else{\n        \n        return(\n            < AdminPanel>\n                <h2>Admin Panel</h2>\n                <ColoredLine1/>\n                <h2 >New Post</h2>\n                <newPost>\n                    <input\n                        id=\"title\"\n                        type=\"text\"\n                        placeholder=\"Title\"\n                        value={title}\n                        onChange={handleTitleChange}\n                    ></input>\n                    <label>Upload Image</label>\n                    <input\n                        id=\"imagePicker\"\n                        type=\"file\"\n                        accept=\".jpg,.jpeg,.png\"\n                        multiple=\"false\"\n                        onChange={handlefileSelected}\n                     ></input>\n\n\n                    <input\n                        id=\"content\"\n                        type=\"text\"\n                        placeholder=\"Content\"\n                        value={content}\n                        onChange={handleContentChange}\n                    ></input>\n\n                     <h5 id=\"selectCat\">Select Category </h5>\n                     <Select\n                        id=\"dropDown\"\n                        value={selectedOption}\n                        onChange={handleDropDownChange}\n                        options={options}\n                        placeholder={selectedOption}\n                    />\n                    \n                    <button id=\"newBtn\" type=\"submit\" onClick={handleNewSubmit}>POST</button>\n                </newPost>\n                \n                <DeleteTab>\n                 <h3>Click To Delete Below Post</h3>\n                 <DeletePost user={username}/>\n                </DeleteTab>\n                \n                \n            </AdminPanel>\n           \n        )\n    }\n    \n}\nexport default Admin"]},"metadata":{},"sourceType":"module"}